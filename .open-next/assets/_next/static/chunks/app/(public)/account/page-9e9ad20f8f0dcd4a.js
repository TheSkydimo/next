(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{5602:function(e,n,t){Promise.resolve().then(t.bind(t,2867))},2867:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return l}});var i=t(7437),s=t(2265),r=t(7648);function l(){var e;let[n,t]=(0,s.useState)(null),[l,c]=(0,s.useState)(!0),[a,d]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=!1;return async function(){try{c(!0),d(null);let i=await fetch("/api/account/me",{method:"GET",headers:{"Content-Type":"application/json"}});if(401===i.status){e||d("未登录，请先登录");return}let s=await i.json().catch(()=>({}));if(!i.ok){if(!e){var n;d(null!==(n=s.message)&&void 0!==n?n:"获取用户信息失败")}return}e||t(s.data)}catch(n){e||d("网络错误，请稍后重试")}finally{e||c(!1)}}(),()=>{e=!0}},[]),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:"首页"}),l&&(0,i.jsx)("p",{children:"加载中..."}),!l&&a&&(0,i.jsxs)("p",{style:{color:"red",marginTop:16},children:[a,a.includes("未登录")&&(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsx)(r.default,{href:"/login",children:"去登录"})]})]}),!l&&n&&(0,i.jsxs)("section",{style:{marginTop:24},children:[(0,i.jsx)("h2",{children:"基本信息"}),(0,i.jsxs)("div",{style:{marginTop:12,lineHeight:1.8},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"邮箱："}),n.email]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"姓名："}),null!==(e=n.name)&&void 0!==e?e:"未设置"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"角色："}),"ADMIN"===n.role?"管理员":"普通用户"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"注册时间："}),new Date(n.createdAt).toLocaleString()]})]})]})]})}},7648:function(e,n,t){"use strict";t.d(n,{default:function(){return s.a}});var i=t(2972),s=t.n(i)}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=5602)}),_N_E=e.O()}]);